<div class="admin-section">
  <div class="admin-header">
    <h1>Mystereeple Shop Items</h1>
    <%= link_to 'Add New Shop Item', new_admin_mystereeple_shop_item_path, class: 'btn btn-primary' %>
  </div>

  <div class="admin-content">
    <% if @shop_items.any? %>
      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Image</th>
              <th>Name</th>
              <th>Cost</th>
              <th>Limit</th>
              <th>Remaining</th>
              <th>Enabled</th>
              <th>Description</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @shop_items.each do |item| %>
              <tr>
                <td>
                  <% if item.image.attached? %>
                    <%= image_tag item.image, class: 'item-thumbnail', alt: item.name %>
                  <% else %>
                    <span class="no-image">No image</span>
                  <% end %>
                </td>
                <td><%= item.name %></td>
                <td><%= item.cost %> ðŸª™</td>
                <td><%= item.limit %></td>
                <td>
                  <% remaining = item.remaining_quantity %>
                  <span class="<%= remaining > 0 ? 'text-success' : 'text-danger' %>">
                    <%= remaining %>
                  </span>
                </td>
                <td>
                  <% if item.enabled? %>
                    <span class="badge badge-success">Yes</span>
                  <% else %>
                    <span class="badge badge-secondary">No</span>
                  <% end %>
                </td>
                <td><%= truncate(item.description, length: 50) %></td>
                <td>
                  <div class="admin-actions">
                    <%= link_to 'View', admin_mystereeple_shop_item_path(item), class: 'btn btn-sm btn-outline' %>
                    <%= link_to 'Edit', edit_admin_mystereeple_shop_item_path(item), class: 'btn btn-sm btn-outline' %>
                    <%= link_to 'Delete', admin_mystereeple_shop_item_path(item), 
                        class: 'btn btn-sm btn-danger', 
                        method: :delete,
                        data: { confirm: 'Are you sure you want to delete this shop item?' } %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="admin-empty-state">
        <p>No shop items found. <%= link_to 'Add the first shop item', new_admin_mystereeple_shop_item_path %>.</p>
      </div>
    <% end %>
  </div>
</div>

<style>
  .item-thumbnail {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 4px;
  }

  .no-image {
    color: #666;
    font-style: italic;
    font-size: 0.9em;
  }

  .text-success {
    color: #10b981;
    font-weight: 500;
  }

  .text-danger {
    color: #ef4444;
    font-weight: 500;
  }

  .badge {
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .badge-success {
    background-color: #10b981;
    color: white;
  }

  .badge-secondary {
    background-color: #6b7280;
    color: white;
  }
</style>
